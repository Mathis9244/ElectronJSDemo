"use strict";var ft=Object.defineProperty;var pt=(f,i,o)=>i in f?ft(f,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[i]=o;var y=(f,i,o)=>pt(f,typeof i!="symbol"?i+"":i,o);const A=require("electron"),I=require("node:path"),F=require("path"),Xe=require("child_process"),ht=require("tty"),Ke=require("util"),L=require("fs"),dt=require("net"),_=require("os"),et=require("events"),gt=require("http"),yt=require("https");function tt(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ge={exports:{}},$={exports:{}},R={exports:{}},T,ve;function mt(){if(ve)return T;ve=1;var f=1e3,i=f*60,o=i*60,c=o*24,a=c*365.25;T=function(n,l){l=l||{};var u=typeof n;if(u==="string"&&n.length>0)return r(n);if(u==="number"&&isNaN(n)===!1)return l.long?t(n):e(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function r(n){if(n=String(n),!(n.length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(l){var u=parseFloat(l[1]),p=(l[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"days":case"day":case"d":return u*c;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*i;case"seconds":case"second":case"secs":case"sec":case"s":return u*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function e(n){return n>=c?Math.round(n/c)+"d":n>=o?Math.round(n/o)+"h":n>=i?Math.round(n/i)+"m":n>=f?Math.round(n/f)+"s":n+"ms"}function t(n){return s(n,c,"day")||s(n,o,"hour")||s(n,i,"minute")||s(n,f,"second")||n+" ms"}function s(n,l,u){if(!(n<l))return n<l*1.5?Math.floor(n/l)+" "+u:Math.ceil(n/l)+" "+u+"s"}return T}var be;function rt(){return be||(be=1,function(f,i){i=f.exports=a.debug=a.default=a,i.coerce=s,i.disable=e,i.enable=r,i.enabled=t,i.humanize=mt(),i.names=[],i.skips=[],i.formatters={};var o;function c(n){var l=0,u;for(u in n)l=(l<<5)-l+n.charCodeAt(u),l|=0;return i.colors[Math.abs(l)%i.colors.length]}function a(n){function l(){if(l.enabled){var u=l,p=+new Date,h=p-(o||p);u.diff=h,u.prev=o,u.curr=p,o=p;for(var d=new Array(arguments.length),m=0;m<d.length;m++)d[m]=arguments[m];d[0]=i.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var g=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(E,P){if(E==="%%")return E;g++;var C=i.formatters[P];if(typeof C=="function"){var b=d[g];E=C.call(u,b),d.splice(g,1),g--}return E}),i.formatArgs.call(u,d);var v=l.log||i.log||console.log.bind(console);v.apply(u,d)}}return l.namespace=n,l.enabled=i.enabled(n),l.useColors=i.useColors(),l.color=c(n),typeof i.init=="function"&&i.init(l),l}function r(n){i.save(n),i.names=[],i.skips=[];for(var l=(typeof n=="string"?n:"").split(/[\s,]+/),u=l.length,p=0;p<u;p++)l[p]&&(n=l[p].replace(/\*/g,".*?"),n[0]==="-"?i.skips.push(new RegExp("^"+n.substr(1)+"$")):i.names.push(new RegExp("^"+n+"$")))}function e(){i.enable("")}function t(n){var l,u;for(l=0,u=i.skips.length;l<u;l++)if(i.skips[l].test(n))return!1;for(l=0,u=i.names.length;l<u;l++)if(i.names[l].test(n))return!0;return!1}function s(n){return n instanceof Error?n.stack||n.message:n}}(R,R.exports)),R.exports}var we;function vt(){return we||(we=1,function(f,i){i=f.exports=rt(),i.log=a,i.formatArgs=c,i.save=r,i.load=e,i.useColors=o,i.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:t(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function o(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}i.formatters.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function c(s){var n=this.useColors;if(s[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+s[0]+(n?"%c ":" ")+"+"+i.humanize(this.diff),!!n){var l="color: "+this.color;s.splice(1,0,l,"color: inherit");var u=0,p=0;s[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(u++,h==="%c"&&(p=u))}),s.splice(p,0,l)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function r(s){try{s==null?i.storage.removeItem("debug"):i.storage.debug=s}catch{}}function e(){var s;try{s=i.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}i.enable(e());function t(){try{return window.localStorage}catch{}}}($,$.exports)),$.exports}var j={exports:{}},Ee;function bt(){return Ee||(Ee=1,function(f,i){var o=ht,c=Ke;i=f.exports=rt(),i.init=p,i.log=s,i.formatArgs=t,i.save=n,i.load=l,i.useColors=e,i.colors=[6,2,3,4,5,1],i.inspectOpts=Object.keys(process.env).filter(function(h){return/^debug_/i.test(h)}).reduce(function(h,d){var m=d.substring(6).toLowerCase().replace(/_([a-z])/g,function(v,E){return E.toUpperCase()}),g=process.env[d];return/^(yes|on|true|enabled)$/i.test(g)?g=!0:/^(no|off|false|disabled)$/i.test(g)?g=!1:g==="null"?g=null:g=Number(g),h[m]=g,h},{});var a=parseInt(process.env.DEBUG_FD,10)||2;a!==1&&a!==2&&c.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var r=a===1?process.stdout:a===2?process.stderr:u(a);function e(){return"colors"in i.inspectOpts?!!i.inspectOpts.colors:o.isatty(a)}i.formatters.o=function(h){return this.inspectOpts.colors=this.useColors,c.inspect(h,this.inspectOpts).split(`
`).map(function(d){return d.trim()}).join(" ")},i.formatters.O=function(h){return this.inspectOpts.colors=this.useColors,c.inspect(h,this.inspectOpts)};function t(h){var d=this.namespace,m=this.useColors;if(m){var g=this.color,v="  \x1B[3"+g+";1m"+d+" \x1B[0m";h[0]=v+h[0].split(`
`).join(`
`+v),h.push("\x1B[3"+g+"m+"+i.humanize(this.diff)+"\x1B[0m")}else h[0]=new Date().toUTCString()+" "+d+" "+h[0]}function s(){return r.write(c.format.apply(c,arguments)+`
`)}function n(h){h==null?delete process.env.DEBUG:process.env.DEBUG=h}function l(){return process.env.DEBUG}function u(h){var d,m=process.binding("tty_wrap");switch(m.guessHandleType(h)){case"TTY":d=new o.WriteStream(h),d._type="tty",d._handle&&d._handle.unref&&d._handle.unref();break;case"FILE":var g=L;d=new g.SyncWriteStream(h,{autoClose:!1}),d._type="fs";break;case"PIPE":case"TCP":var v=dt;d=new v.Socket({fd:h,readable:!1,writable:!0}),d.readable=!1,d.read=null,d._type="pipe",d._handle&&d._handle.unref&&d._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return d.fd=h,d._isStdio=!0,d}function p(h){h.inspectOpts={};for(var d=Object.keys(i.inspectOpts),m=0;m<d.length;m++)h.inspectOpts[d[m]]=i.inspectOpts[d[m]]}i.enable(l())}(j,j.exports)),j.exports}typeof process<"u"&&process.type==="renderer"?ge.exports=vt():ge.exports=bt();var wt=ge.exports,ye=F,Et=Xe.spawn,nt=wt("electron-squirrel-startup"),k=A.app,Se=function(f,i){var o=ye.resolve(ye.dirname(process.execPath),"..","Update.exe");nt("Spawning `%s` with args `%s`",o,f),Et(o,f,{detached:!0}).on("close",i)},St=function(){if(process.platform==="win32"){var f=process.argv[1];nt("processing squirrel command `%s`",f);var i=ye.basename(process.execPath);if(f==="--squirrel-install"||f==="--squirrel-updated")return Se(["--createShortcut="+i],k.quit),!0;if(f==="--squirrel-uninstall")return Se(["--removeShortcut="+i],k.quit),!0;if(f==="--squirrel-obsolete")return k.quit(),!0}return!1},Ot=St();const At=tt(Ot);var N={exports:{}},z={exports:{}},Oe;function st(){return Oe||(Oe=1,function(f){let i={};try{i=require("electron")}catch{}i.ipcRenderer&&o(i),f.exports=o;function o({contextBridge:c,ipcRenderer:a}){if(!a)return;a.on("__ELECTRON_LOG_IPC__",(e,t)=>{window.postMessage({cmd:"message",...t})}),a.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(e=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${e.message}`)));const r={sendToMain(e){try{a.send("__ELECTRON_LOG__",e)}catch(t){console.error("electronLog.sendToMain ",t,"data:",e),a.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:t==null?void 0:t.message,stack:t==null?void 0:t.stack},errorName:"sendToMain"})}},log(...e){r.sendToMain({data:e,level:"info"})}};for(const e of["error","warn","info","verbose","debug","silly"])r[e]=(...t)=>r.sendToMain({data:t,level:e});if(c&&process.contextIsolated)try{c.exposeInMainWorld("__electronLog",r)}catch{}typeof window=="object"?window.__electronLog=r:__electronLog=r}}(z)),z.exports}var W={exports:{}},U,Ae;function Lt(){if(Ae)return U;Ae=1,U=f;function f(i){return Object.defineProperties(o,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof o.labelPadding){case"boolean":return o.labelPadding?o.maxLabelLength:0;case"number":return o.labelPadding;default:return 0}}}});function o(c){o.maxLabelLength=Math.max(o.maxLabelLength,c.length);const a={};for(const r of i.levels)a[r]=(...e)=>i.logData(e,{level:r,scope:c});return a.log=a.info,a}}return U}var B,Le;function Ft(){if(Le)return B;Le=1;class f{constructor({processMessage:o}){this.processMessage=o,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(o){this.buffer.push(o)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(o=>this.processMessage(o)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return B=f,B}var J,Fe;function it(){if(Fe)return J;Fe=1;const f=Lt(),i=Ft(),c=class c{constructor({allowUnknownLevel:r=!1,dependencies:e={},errorHandler:t,eventLogger:s,initializeFn:n,isDev:l=!1,levels:u=["error","warn","info","verbose","debug","silly"],logId:p,transportFactories:h={},variables:d}={}){y(this,"dependencies",{});y(this,"errorHandler",null);y(this,"eventLogger",null);y(this,"functions",{});y(this,"hooks",[]);y(this,"isDev",!1);y(this,"levels",null);y(this,"logId",null);y(this,"scope",null);y(this,"transports",{});y(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=r,this.buffering=new i(this),this.dependencies=e,this.initializeFn=n,this.isDev=l,this.levels=u,this.logId=p,this.scope=f(this),this.transportFactories=h,this.variables=d||{};for(const m of this.levels)this.addLevel(m,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=t,t==null||t.setOptions({...e,logFn:this.error}),this.eventLogger=s,s==null||s.setOptions({...e,logger:this});for(const[m,g]of Object.entries(h))this.transports[m]=g(this,e);c.instances[p]=this}static getInstance({logId:r}){return this.instances[r]||this.instances.default}addLevel(r,e=this.levels.length){e!==!1&&this.levels.splice(e,0,r),this[r]=(...t)=>this.logData(t,{level:r}),this.functions[r]=this[r]}catchErrors(r){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(r)}create(r){return typeof r=="string"&&(r={logId:r}),new c({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...r})}compareLevels(r,e,t=this.levels){const s=t.indexOf(r),n=t.indexOf(e);return n===-1||s===-1?!0:n<=s}initialize(r={}){this.initializeFn({logger:this,...this.dependencies,...r})}logData(r,e={}){this.buffering.enabled?this.buffering.addMessage({data:r,date:new Date,...e}):this.processMessage({data:r,...e})}processMessage(r,{transports:e=this.transports}={}){if(r.cmd==="errorHandler"){this.errorHandler.handle(r.error,{errorName:r.errorName,processType:"renderer",showDialog:!!r.showDialog});return}let t=r.level;this.allowUnknownLevel||(t=this.levels.includes(r.level)?r.level:"info");const s={date:new Date,logId:this.logId,...r,level:t,variables:{...this.variables,...r.variables}};for(const[n,l]of this.transportEntries(e))if(!(typeof l!="function"||l.level===!1)&&this.compareLevels(l.level,r.level))try{const u=this.hooks.reduce((p,h)=>p&&h(p,l,n),s);u&&l({...u,data:[...u.data]})}catch(u){this.processInternalErrorFn(u)}}processInternalErrorFn(r){}transportEntries(r=this.transports){return(Array.isArray(r)?r:Object.entries(r)).map(t=>{switch(typeof t){case"string":return this.transports[t]?[t,this.transports[t]]:null;case"function":return[t.name,t];default:return Array.isArray(t)?t:null}}).filter(Boolean)}};y(c,"instances",{});let o=c;return J=o,J}var H,De;function Dt(){if(De)return H;De=1;const f=console.error;class i{constructor({logFn:c=null}={}){y(this,"logFn",null);y(this,"onError",null);y(this,"showDialog",!1);y(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=c}handle(c,{logFn:a=this.logFn,errorName:r="",onError:e=this.onError,showDialog:t=this.showDialog}={}){try{(e==null?void 0:e({error:c,errorName:r,processType:"renderer"}))!==!1&&a({error:c,errorName:r,showDialog:t})}catch{f(c)}}setOptions({logFn:c,onError:a,preventDefault:r,showDialog:e}){typeof c=="function"&&(this.logFn=c),typeof a=="function"&&(this.onError=a),typeof r=="boolean"&&(this.preventDefault=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:c,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:c,showDialog:a}),window.addEventListener("error",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleError(r.error||r)}),window.addEventListener("unhandledrejection",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleRejection(r.reason||r)}))}handleError(c){this.handle(c,{errorName:"Unhandled"})}handleRejection(c){const a=c instanceof Error?c:new Error(JSON.stringify(c));this.handle(a,{errorName:"Unhandled rejection"})}}return H=i,H}var V,qe;function D(){if(qe)return V;qe=1,V={transform:f};function f({logger:i,message:o,transport:c,initialData:a=(o==null?void 0:o.data)||[],transforms:r=c==null?void 0:c.transforms}){return r.reduce((e,t)=>typeof t=="function"?t({data:e,logger:i,message:o,transport:c}):e,a)}return V}var G,Pe;function qt(){if(Pe)return G;Pe=1;const{transform:f}=D();G=o;const i={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function o(a){return Object.assign(r,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[c],writeFn({message:{level:e,data:t}}){const s=i[e]||i.info;setTimeout(()=>s(...t))}});function r(e){r.writeFn({message:{...e,data:f({logger:a,message:e,transport:r})}})}}function c({data:a=[],logger:r={},message:e={},transport:t={}}){if(typeof t.format=="function")return t.format({data:a,level:(e==null?void 0:e.level)||"info",logger:r,message:e,transport:t});if(typeof t.format!="string")return a;a.unshift(t.format),typeof a[1]=="string"&&a[1].match(/%[1cdfiOos]/)&&(a=[`${a[0]}${a[1]}`,...a.slice(2)]);const s=e.date||new Date;return a[0]=a[0].replace(/\{(\w+)}/g,(n,l)=>{var u,p;switch(l){case"level":return e.level;case"logId":return e.logId;case"scope":{const h=e.scope||((u=r.scope)==null?void 0:u.defaultLabel);return h?` (${h})`:""}case"text":return"";case"y":return s.getFullYear().toString(10);case"m":return(s.getMonth()+1).toString(10).padStart(2,"0");case"d":return s.getDate().toString(10).padStart(2,"0");case"h":return s.getHours().toString(10).padStart(2,"0");case"i":return s.getMinutes().toString(10).padStart(2,"0");case"s":return s.getSeconds().toString(10).padStart(2,"0");case"ms":return s.getMilliseconds().toString(10).padStart(3,"0");case"iso":return s.toISOString();default:return((p=e.variables)==null?void 0:p[l])||n}}).trim(),a}return G}var Y,_e;function Pt(){if(_e)return Y;_e=1;const{transform:f}=D();Y=o;const i=new Set([Promise,WeakMap,WeakSet]);function o(r){return Object.assign(e,{depth:5,transforms:[a]});function e(t){if(!window.__electronLog){r.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const s=f({initialData:t,logger:r,message:t,transport:e});__electronLog.sendToMain(s)}catch(s){r.transports.console({data:["electronLog.transports.ipc",s,"data:",t.data],level:"error"})}}}function c(r){return Object(r)!==r}function a({data:r,depth:e,seen:t=new WeakSet,transport:s={}}={}){const n=e||s.depth||5;return t.has(r)?"[Circular]":n<1?c(r)?r:Array.isArray(r)?"[Array]":`[${typeof r}]`:["function","symbol"].includes(typeof r)?r.toString():c(r)?r:i.has(r.constructor)?`[${r.constructor.name}]`:Array.isArray(r)?r.map(l=>a({data:l,depth:n-1,seen:t})):r instanceof Date?r.toISOString():r instanceof Error?r.stack:r instanceof Map?new Map(Array.from(r).map(([l,u])=>[a({data:l,depth:n-1,seen:t}),a({data:u,depth:n-1,seen:t})])):r instanceof Set?new Set(Array.from(r).map(l=>a({data:l,depth:n-1,seen:t}))):(t.add(r),Object.fromEntries(Object.entries(r).map(([l,u])=>[l,a({data:u,depth:n-1,seen:t})])))}return Y}var Ce;function _t(){return Ce||(Ce=1,function(f){const i=it(),o=Dt(),c=qt(),a=Pt();typeof process=="object"&&process.type==="browser"&&console.warn("electron-log/renderer is loaded in the main process. It could cause unexpected behaviour."),f.exports=r(),f.exports.Logger=i,f.exports.default=f.exports;function r(){const e=new i({allowUnknownLevel:!0,errorHandler:new o,initializeFn:()=>{},logId:"default",transportFactories:{console:c,ipc:a},variables:{processType:"renderer"}});return e.errorHandler.setOptions({logFn({error:t,errorName:s,showDialog:n}){e.transports.console({data:[s,t].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:t==null?void 0:t.cause,code:t==null?void 0:t.code,name:t==null?void 0:t.name,message:t==null?void 0:t.message,stack:t==null?void 0:t.stack},errorName:s,logId:e.logId,showDialog:n})}}),typeof window=="object"&&window.addEventListener("message",t=>{const{cmd:s,logId:n,...l}=t.data||{},u=i.getInstance({logId:n});s==="message"&&u.processMessage(l,{transports:["console"]})}),new Proxy(e,{get(t,s){return typeof t[s]<"u"?t[s]:(...n)=>e.logData(n,{level:s})}})}}(W)),W.exports}var Q,$e;function Ct(){if($e)return Q;$e=1;const f=L,i=F;Q={findAndReadPackageJson:o,tryReadJsonAt:c};function o(){return c(e())||c(r())||c(process.resourcesPath,"app.asar")||c(process.resourcesPath,"app")||c(process.cwd())||{name:void 0,version:void 0}}function c(...t){if(t[0])try{const s=i.join(...t),n=a("package.json",s);if(!n)return;const l=JSON.parse(f.readFileSync(n,"utf8")),u=(l==null?void 0:l.productName)||(l==null?void 0:l.name);return!u||u.toLowerCase()==="electron"?void 0:u?{name:u,version:l==null?void 0:l.version}:void 0}catch{return}}function a(t,s){let n=s;for(;;){const l=i.parse(n),u=l.root,p=l.dir;if(f.existsSync(i.join(n,t)))return i.resolve(i.join(n,t));if(n===u)return null;n=p}}function r(){const t=process.argv.filter(n=>n.indexOf("--user-data-dir=")===0);return t.length===0||typeof t[0]!="string"?null:t[0].replace("--user-data-dir=","")}function e(){var t;try{return(t=require.main)==null?void 0:t.filename}catch{return}}return Q}var Z,Re;function ot(){if(Re)return Z;Re=1;const f=Xe,i=_,o=F,c=Ct();class a{constructor(){y(this,"appName");y(this,"appPackageJson");y(this,"platform",process.platform)}getAppLogPath(e=this.getAppName()){return this.platform==="darwin"?o.join(this.getSystemPathHome(),"Library/Logs",e):o.join(this.getAppUserDataPath(e),"logs")}getAppName(){var t;const e=this.appName||((t=this.getAppPackageJson())==null?void 0:t.name);if(!e)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return e}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=c.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(e=this.getAppName()){return e?o.join(this.getSystemPathAppData(),e):void 0}getAppVersion(){var e;return(e=this.getAppPackageJson())==null?void 0:e.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const e=Number(i.release().split(".")[0]);return e<=19?`10.${e-4}`:e-9}getOsVersion(){let e=i.type().replace("_"," "),t=i.release();return e==="Darwin"&&(e="macOS",t=this.getMacOsVersion()),`${e} ${t}`}getPathVariables(){const e=this.getAppName(),t=this.getAppVersion(),s=this;return{appData:this.getSystemPathAppData(),appName:e,appVersion:t,get electronDefaultDir(){return s.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(e),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(e)}}getSystemPathAppData(){const e=this.getSystemPathHome();switch(this.platform){case"darwin":return o.join(e,"Library/Application Support");case"win32":return process.env.APPDATA||o.join(e,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||o.join(e,".config")}}getSystemPathHome(){var e;return((e=i.homedir)==null?void 0:e.call(i))||process.env.HOME}getSystemPathTemp(){return i.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(e,t){}onAppReady(e){e()}onEveryWebContentsEvent(e,t){}onIpc(e,t){}onIpcInvoke(e,t){}openUrl(e,t=console.error){const n={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";f.exec(`${n} ${e}`,{},l=>{l&&t(l)})}setAppName(e){this.appName=e}setPlatform(e){this.platform=e}setPreloadFileForSessions({filePath:e,includeFutureSession:t=!0,getSessions:s=()=>[]}){}sendIpc(e,t){}showErrorBox(e,t){}}return Z=a,Z}var X,je;function $t(){if(je)return X;je=1;const f=F,i=ot();class o extends i{constructor({electron:r}={}){super();y(this,"electron");this.electron=r}getAppName(){var e,t;let r;try{r=this.appName||((e=this.electron.app)==null?void 0:e.name)||((t=this.electron.app)==null?void 0:t.getName())}catch{}return r||super.getAppName()}getAppUserDataPath(r){return this.getPath("userData")||super.getAppUserDataPath(r)}getAppVersion(){var e;let r;try{r=(e=this.electron.app)==null?void 0:e.getVersion()}catch{}return r||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(r){var e;try{return(e=this.electron.app)==null?void 0:e.getPath(r)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var r;return((r=this.electron.app)==null?void 0:r.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?f.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(r,e){var t;return(t=this.electron.app)==null||t.on(r,e),()=>{var s;(s=this.electron.app)==null||s.off(r,e)}}onAppReady(r){var e,t,s;(e=this.electron.app)!=null&&e.isReady()?r():(t=this.electron.app)!=null&&t.once?(s=this.electron.app)==null||s.once("ready",r):r()}onEveryWebContentsEvent(r,e){var s,n,l;return(n=(s=this.electron.webContents)==null?void 0:s.getAllWebContents())==null||n.forEach(u=>{u.on(r,e)}),(l=this.electron.app)==null||l.on("web-contents-created",t),()=>{var u,p;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(h=>{h.off(r,e)}),(p=this.electron.app)==null||p.off("web-contents-created",t)};function t(u,p){p.on(r,e)}}onIpc(r,e){var t;(t=this.electron.ipcMain)==null||t.on(r,e)}onIpcInvoke(r,e){var t,s;(s=(t=this.electron.ipcMain)==null?void 0:t.handle)==null||s.call(t,r,e)}openUrl(r,e=console.error){var t;(t=this.electron.shell)==null||t.openExternal(r).catch(e)}setPreloadFileForSessions({filePath:r,includeFutureSession:e=!0,getSessions:t=()=>{var s;return[(s=this.electron.session)==null?void 0:s.defaultSession]}}){for(const n of t().filter(Boolean))s(n);e&&this.onAppEvent("session-created",n=>{s(n)});function s(n){typeof n.registerPreloadScript=="function"?n.registerPreloadScript({filePath:r,id:"electron-log-preload",type:"frame"}):n.setPreloads([...n.getPreloads(),r])}}sendIpc(r,e){var t,s;(s=(t=this.electron.BrowserWindow)==null?void 0:t.getAllWindows())==null||s.forEach(n=>{var l,u;((l=n.webContents)==null?void 0:l.isDestroyed())===!1&&((u=n.webContents)==null?void 0:u.isCrashed())===!1&&n.webContents.send(r,e)})}showErrorBox(r,e){var t;(t=this.electron.dialog)==null||t.showErrorBox(r,e)}}return X=o,X}var K,Ne;function Rt(){if(Ne)return K;Ne=1;const f=L,i=_,o=F,c=st();let a=!1,r=!1;K={initialize({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preload:p=!0,spyRendererConsole:h=!1}){s.onAppReady(()=>{try{p&&e({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preloadOption:p}),h&&t({externalApi:s,logger:u})}catch(d){u.warn(d)}})}};function e({externalApi:s,getSessions:n,includeFutureSession:l,logger:u,preloadOption:p}){let h=typeof p=="string"?p:void 0;if(a){u.warn(new Error("log.initialize({ preload }) already called").stack);return}a=!0;try{h=o.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!h||!f.existsSync(h)){h=o.join(s.getAppUserDataPath()||i.tmpdir(),"electron-log-preload.js");const d=`
      try {
        (${c.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;f.writeFileSync(h,d,"utf8")}s.setPreloadFileForSessions({filePath:h,includeFutureSession:l,getSessions:n})}function t({externalApi:s,logger:n}){if(r){n.warn(new Error("log.initialize({ spyRendererConsole }) already called").stack);return}r=!0;const l=["debug","info","warn","error"];s.onEveryWebContentsEvent("console-message",(u,p,h)=>{n.processMessage({data:[h],level:l[p],variables:{processType:"renderer"}})})}return K}var ee,xe;function jt(){if(xe)return ee;xe=1;class f{constructor({externalApi:c,logFn:a=void 0,onError:r=void 0,showDialog:e=void 0}={}){y(this,"externalApi");y(this,"isActive",!1);y(this,"logFn");y(this,"onError");y(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:c,logFn:a,onError:r,showDialog:e}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(c,{logFn:a=this.logFn,onError:r=this.onError,processType:e="browser",showDialog:t=this.showDialog,errorName:s=""}={}){var n;c=i(c);try{if(typeof r=="function"){const l=((n=this.externalApi)==null?void 0:n.getVersions())||{},u=this.createIssue;if(r({createIssue:u,error:c,errorName:s,processType:e,versions:l})===!1)return}s?a(s,c):a(c),t&&!s.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${e} process`,c.stack)}catch{console.error(c)}}setOptions({externalApi:c,logFn:a,onError:r,showDialog:e}){typeof c=="object"&&(this.externalApi=c),typeof a=="function"&&(this.logFn=a),typeof r=="function"&&(this.onError=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:c,showDialog:a}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:c,showDialog:a}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(c,a){var r;(r=this.externalApi)==null||r.openUrl(`${c}?${new URLSearchParams(a).toString()}`)}handleError(c){this.handle(c,{errorName:"Unhandled"})}handleRejection(c){const a=c instanceof Error?c:new Error(JSON.stringify(c));this.handle(a,{errorName:"Unhandled rejection"})}}function i(o){if(o instanceof Error)return o;if(o&&typeof o=="object"){if(o.message)return Object.assign(new Error(o.message),o);try{return new Error(JSON.stringify(o))}catch(c){return new Error(`Couldn't normalize error ${String(o)}: ${c}`)}}return new Error(`Can't normalize error ${String(o)}`)}return ee=f,ee}var te,Ie;function Nt(){if(Ie)return te;Ie=1;class f{constructor(o={}){y(this,"disposers",[]);y(this,"format","{eventSource}#{eventName}:");y(this,"formatters",{app:{"certificate-error":({args:o})=>this.arrayToObject(o.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:o})=>o.length===1?o[0]:o,"render-process-gone":({args:[o,c]})=>c&&typeof c=="object"?{...c,...this.getWebContentsDetails(o)}:[]},webContents:{"console-message":({args:[o,c,a,r]})=>{if(!(o<3))return{message:c,source:`${r}:${a}`}},"did-fail-load":({args:o})=>this.arrayToObject(o,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:o})=>this.arrayToObject(o,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:o})=>this.arrayToObject(o,["name","version"]),"preload-error":({args:o})=>this.arrayToObject(o,["preloadPath","error"])}});y(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});y(this,"externalApi");y(this,"level","error");y(this,"scope","");this.setOptions(o)}setOptions({events:o,externalApi:c,level:a,logger:r,format:e,formatters:t,scope:s}){typeof o=="object"&&(this.events=o),typeof c=="object"&&(this.externalApi=c),typeof a=="string"&&(this.level=a),typeof r=="object"&&(this.logger=r),(typeof e=="string"||typeof e=="function")&&(this.format=e),typeof t=="object"&&(this.formatters=t),typeof s=="string"&&(this.scope=s)}startLogging(o={}){this.setOptions(o),this.disposeListeners();for(const c of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(c,(...a)=>{this.handleEvent({eventSource:"app",eventName:c,handlerArgs:a})}));for(const c of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(c,(...a)=>{this.handleEvent({eventSource:"webContents",eventName:c,handlerArgs:a})}))}stopLogging(){this.disposeListeners()}arrayToObject(o,c){const a={};return c.forEach((r,e)=>{a[r]=o[e]}),o.length>c.length&&(a.unknownArgs=o.slice(c.length)),a}disposeListeners(){this.disposers.forEach(o=>o()),this.disposers=[]}formatEventLog({eventName:o,eventSource:c,handlerArgs:a}){var u;const[r,...e]=a;if(typeof this.format=="function")return this.format({args:e,event:r,eventName:o,eventSource:c});const t=(u=this.formatters[c])==null?void 0:u[o];let s=e;if(typeof t=="function"&&(s=t({args:e,event:r,eventName:o,eventSource:c})),!s)return;const n={};return Array.isArray(s)?n.args=s:typeof s=="object"&&Object.assign(n,s),c==="webContents"&&Object.assign(n,this.getWebContentsDetails(r==null?void 0:r.sender)),[this.format.replace("{eventSource}",c==="app"?"App":"WebContents").replace("{eventName}",o),n]}getEventNames(o){return!o||typeof o!="object"?[]:Object.entries(o).filter(([c,a])=>a).map(([c])=>c)}getWebContentsDetails(o){if(!(o!=null&&o.loadURL))return{};try{return{webContents:{id:o.id,url:o.getURL()}}}catch{return{}}}handleEvent({eventName:o,eventSource:c,handlerArgs:a}){var e;const r=this.formatEventLog({eventName:o,eventSource:c,handlerArgs:a});if(r){const t=this.scope?this.logger.scope(this.scope):this.logger;(e=t==null?void 0:t[this.level])==null||e.call(t,...r)}}}return te=f,te}var re,Me;function at(){if(Me)return re;Me=1;const{transform:f}=D();re={concatFirstStringElements:i,formatScope:c,formatText:r,formatVariables:a,timeZoneFromOffset:o,format({message:e,logger:t,transport:s,data:n=e==null?void 0:e.data}){switch(typeof s.format){case"string":return f({message:e,logger:t,transforms:[a,c,r],transport:s,initialData:[s.format,...n]});case"function":return s.format({data:n,level:(e==null?void 0:e.level)||"info",logger:t,message:e,transport:s});default:return n}}};function i({data:e}){return typeof e[0]!="string"||typeof e[1]!="string"||e[0].match(/%[1cdfiOos]/)?e:[`${e[0]} ${e[1]}`,...e.slice(2)]}function o(e){const t=Math.abs(e),s=e>0?"-":"+",n=Math.floor(t/60).toString().padStart(2,"0"),l=(t%60).toString().padStart(2,"0");return`${s}${n}:${l}`}function c({data:e,logger:t,message:s}){const{defaultLabel:n,labelLength:l}=(t==null?void 0:t.scope)||{},u=e[0];let p=s.scope;p||(p=n);let h;return p===""?h=l>0?"".padEnd(l+3):"":typeof p=="string"?h=` (${p})`.padEnd(l+3):h="",e[0]=u.replace("{scope}",h),e}function a({data:e,message:t}){let s=e[0];if(typeof s!="string")return e;s=s.replace("{level}]",`${t.level}]`.padEnd(6," "));const n=t.date||new Date;return e[0]=s.replace(/\{(\w+)}/g,(l,u)=>{var p;switch(u){case"level":return t.level||"info";case"logId":return t.logId;case"y":return n.getFullYear().toString(10);case"m":return(n.getMonth()+1).toString(10).padStart(2,"0");case"d":return n.getDate().toString(10).padStart(2,"0");case"h":return n.getHours().toString(10).padStart(2,"0");case"i":return n.getMinutes().toString(10).padStart(2,"0");case"s":return n.getSeconds().toString(10).padStart(2,"0");case"ms":return n.getMilliseconds().toString(10).padStart(3,"0");case"z":return o(n.getTimezoneOffset());case"iso":return n.toISOString();default:return((p=t.variables)==null?void 0:p[u])||l}}).trim(),e}function r({data:e}){const t=e[0];if(typeof t!="string")return e;if(t.lastIndexOf("{text}")===t.length-6)return e[0]=t.replace(/\s?{text}/,""),e[0]===""&&e.shift(),e;const n=t.split("{text}");let l=[];return n[0]!==""&&l.push(n[0]),l=l.concat(e.slice(1)),n[1]!==""&&l.push(n[1]),l}return re}var ne={exports:{}},Te;function M(){return Te||(Te=1,function(f){const i=Ke;f.exports={serialize:c,maxDepth({data:a,transport:r,depth:e=(r==null?void 0:r.depth)??6}){if(!a)return a;if(e<1)return Array.isArray(a)?"[array]":typeof a=="object"&&a?"[object]":a;if(Array.isArray(a))return a.map(s=>f.exports.maxDepth({data:s,depth:e-1}));if(typeof a!="object"||a&&typeof a.toISOString=="function")return a;if(a===null)return null;if(a instanceof Error)return a;const t={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=f.exports.maxDepth({data:a[s],depth:e-1}));return t},toJSON({data:a}){return JSON.parse(JSON.stringify(a,o()))},toString({data:a,transport:r}){const e=(r==null?void 0:r.inspectOptions)||{},t=a.map(s=>{if(s!==void 0)try{const n=JSON.stringify(s,o(),"  ");return n===void 0?void 0:JSON.parse(n)}catch{return s}});return i.formatWithOptions(e,...t)}};function o(a={}){const r=new WeakSet;return function(e,t){if(typeof t=="object"&&t!==null){if(r.has(t))return;r.add(t)}return c(e,t,a)}}function c(a,r,e={}){const t=(e==null?void 0:e.serializeMapAndSet)!==!1;return r instanceof Error?r.stack:r&&(typeof r=="function"?`[function] ${r.toString()}`:r instanceof Date?r.toISOString():t&&r instanceof Map&&Object.fromEntries?Object.fromEntries(r):t&&r instanceof Set&&Array.from?Array.from(r):r)}}(ne)),ne.exports}var se,ke;function me(){if(ke)return se;ke=1,se={transformStyles:c,applyAnsiStyles({data:a}){return c(a,i,o)},removeStyles({data:a}){return c(a,()=>"")}};const f={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",gray:"\x1B[90m"};function i(a){const r=a.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return f[r]||""}function o(a){return a+f.unset}function c(a,r,e){const t={};return a.reduce((s,n,l,u)=>{if(t[l])return s;if(typeof n=="string"){let p=l,h=!1;n=n.replace(/%[1cdfiOos]/g,d=>{if(p+=1,d!=="%c")return d;const m=u[p];return typeof m=="string"?(t[p]=!0,h=!0,r(m,n)):d}),h&&e&&(n=e(n))}return s.push(n),s},[])}return se}var ie,ze;function xt(){if(ze)return ie;ze=1;const{concatFirstStringElements:f,format:i}=at(),{maxDepth:o,toJSON:c}=M(),{applyAnsiStyles:a,removeStyles:r}=me(),{transform:e}=D(),t={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};ie=l;const n=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(l,{DEFAULT_FORMAT:n});function l(m){return Object.assign(g,{colorMap:{error:"red",warn:"yellow",info:"cyan",verbose:"unset",debug:"gray",silly:"gray",default:"unset"},format:n,level:"silly",transforms:[u,i,h,f,o,c],useStyles:process.env.FORCE_STYLES,writeFn({message:v}){(t[v.level]||t.info)(...v.data)}});function g(v){const E=e({logger:m,message:v,transport:g});g.writeFn({message:{...v,data:E}})}}function u({data:m,message:g,transport:v}){return typeof v.format!="string"||!v.format.includes("%c")?m:[`color:${d(g.level,v)}`,"color:unset",...m]}function p(m,g){if(typeof m=="boolean")return m;const E=g==="error"||g==="warn"?process.stderr:process.stdout;return E&&E.isTTY}function h(m){const{message:g,transport:v}=m;return(p(v.useStyles,g.level)?a:r)(m)}function d(m,g){return g.colorMap[m]||g.colorMap.default}return ie}var oe,We;function ct(){if(We)return oe;We=1;const f=et,i=L,o=_;class c extends f{constructor({path:t,writeOptions:s={encoding:"utf8",flag:"a",mode:438},writeAsync:n=!1}){super();y(this,"asyncWriteQueue",[]);y(this,"bytesWritten",0);y(this,"hasActiveAsyncWriting",!1);y(this,"path",null);y(this,"initialSize");y(this,"writeOptions",null);y(this,"writeAsync",!1);this.path=t,this.writeOptions=s,this.writeAsync=n}get size(){return this.getSize()}clear(){try{return i.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(t){return t.code==="ENOENT"?!0:(this.emit("error",t,this),!1)}}crop(t){try{const s=a(this.path,t||4096);this.clear(),this.writeLine(`[log cropped]${o.EOL}${s}`)}catch(s){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${s.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const t=i.statSync(this.path);this.initialSize=t.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(t){this.bytesWritten+=Buffer.byteLength(t,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const t=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const s=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,i.writeFile(this.path,s,this.writeOptions,n=>{t.hasActiveAsyncWriting=!1,n?t.emit("error",new Error(`Couldn't write to ${t.path}. ${n.message}`),this):t.increaseBytesWrittenCounter(s),t.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(t){if(t+=o.EOL,this.writeAsync){this.asyncWriteQueue.push(t),this.nextAsyncWrite();return}try{i.writeFileSync(this.path,t,this.writeOptions),this.increaseBytesWrittenCounter(t)}catch(s){this.emit("error",new Error(`Couldn't write to ${this.path}. ${s.message}`),this)}}}oe=c;function a(r,e){const t=Buffer.alloc(e),s=i.statSync(r),n=Math.min(s.size,e),l=Math.max(0,s.size-e),u=i.openSync(r,"r"),p=i.readSync(u,t,0,n,l);return i.closeSync(u),t.toString("utf8",0,p)}return oe}var ae,Ue;function It(){if(Ue)return ae;Ue=1;const f=ct();class i extends f{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return ae=i,ae}var ce,Be;function Mt(){if(Be)return ce;Be=1;const f=et,i=L,o=F,c=ct(),a=It();class r extends f{constructor(){super();y(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:s,writeOptions:n={},writeAsync:l=!1}){let u;try{if(s=o.resolve(s),this.store[s])return this.store[s];u=this.createFile({filePath:s,writeOptions:n,writeAsync:l})}catch(p){u=new a({path:s}),this.emitError(p,u)}return u.on("error",this.emitError),this.store[s]=u,u}createFile({filePath:s,writeOptions:n,writeAsync:l}){return this.testFileWriting({filePath:s,writeOptions:n}),new c({path:s,writeOptions:n,writeAsync:l})}emitError(s,n){this.emit("error",s,n)}testFileWriting({filePath:s,writeOptions:n}){i.mkdirSync(o.dirname(s),{recursive:!0}),i.writeFileSync(s,"",{flag:"a",mode:n.mode})}}return ce=r,ce}var le,Je;function Tt(){if(Je)return le;Je=1;const f=L,i=_,o=F,c=Mt(),{transform:a}=D(),{removeStyles:r}=me(),{format:e,concatFirstStringElements:t}=at(),{toString:s}=M();le=l;const n=new c;function l(p,{registry:h=n,externalApi:d}={}){let m;return h.listenerCount("error")<1&&h.on("error",(b,w)=>{E(`Can't write to ${w}`,b)}),Object.assign(g,{fileName:u(p.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:P,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:C,sync:!0,transforms:[r,e,t,s],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(b){const w=b.toString(),O=o.parse(w);try{f.renameSync(w,o.join(O.dir,`${O.name}.old${O.ext}`))}catch(q){E("Could not rotate log",q);const ut=Math.round(g.maxSize/4);b.crop(Math.min(ut,256*1024))}},resolvePathFn(b){return o.join(b.libraryDefaultDir,b.fileName)},setAppName(b){p.dependencies.externalApi.setAppName(b)}});function g(b){const w=P(b);g.maxSize>0&&w.size>g.maxSize&&(g.archiveLogFn(w),w.reset());const q=a({logger:p,message:b,transport:g});w.writeLine(q)}function v(){m||(m=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(d.getPathVariables()),fileName:{get(){return g.fileName},enumerable:!0}}),typeof g.archiveLog=="function"&&(g.archiveLogFn=g.archiveLog,E("archiveLog is deprecated. Use archiveLogFn instead")),typeof g.resolvePath=="function"&&(g.resolvePathFn=g.resolvePath,E("resolvePath is deprecated. Use resolvePathFn instead")))}function E(b,w=null,O="error"){const q=[`electron-log.transports.file: ${b}`];w&&q.push(w),p.transports.console({data:q,date:new Date,level:O})}function P(b){v();const w=g.resolvePathFn(m,b);return h.provide({filePath:w,writeAsync:!g.sync,writeOptions:g.writeOptions})}function C({fileFilter:b=w=>w.endsWith(".log")}={}){v();const w=o.dirname(g.resolvePathFn(m));return f.existsSync(w)?f.readdirSync(w).map(O=>o.join(w,O)).filter(b).map(O=>{try{return{path:O,lines:f.readFileSync(O,"utf8").split(i.EOL)}}catch{return null}}).filter(Boolean):[]}}function u(p=process.type){switch(p){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return le}var ue,He;function kt(){if(He)return ue;He=1;const{maxDepth:f,toJSON:i}=M(),{transform:o}=D();ue=c;function c(a,{externalApi:r}){return Object.assign(e,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:a.isDev?"silly":!1,transforms:[i,f]}),r!=null&&r.isElectron()?e:void 0;function e(t){var s;((s=t==null?void 0:t.variables)==null?void 0:s.processType)!=="renderer"&&(r==null||r.sendIpc(e.eventId,{...t,data:o({logger:a,message:t,transport:e})}))}}return ue}var fe,Ve;function zt(){if(Ve)return fe;Ve=1;const f=gt,i=yt,{transform:o}=D(),{removeStyles:c}=me(),{toJSON:a,maxDepth:r}=M();fe=e;function e(t){return Object.assign(s,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[c,a,r],makeBodyFn({message:n}){return JSON.stringify({client:s.client,data:n.data,date:n.date.getTime(),level:n.level,scope:n.scope,variables:n.variables})},processErrorFn({error:n}){t.processMessage({data:[`electron-log: can't POST ${s.url}`,n],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:n,requestOptions:l,body:u}){const h=(n.startsWith("https:")?i:f).request(n,{method:"POST",...l,headers:{"Content-Type":"application/json","Content-Length":u.length,...l.headers}});return h.write(u),h.end(),h}});function s(n){if(!s.url)return;const l=s.makeBodyFn({logger:t,message:{...n,data:o({logger:t,message:n,transport:s})},transport:s}),u=s.sendRequestFn({serverUrl:s.url,requestOptions:s.requestOptions,body:Buffer.from(l,"utf8")});u.on("error",p=>s.processErrorFn({error:p,logger:t,message:n,request:u,transport:s}))}}return fe}var pe,Ge;function lt(){if(Ge)return pe;Ge=1;const f=it(),i=jt(),o=Nt(),c=xt(),a=Tt(),r=kt(),e=zt();pe=t;function t({dependencies:s,initializeFn:n}){var u;const l=new f({dependencies:s,errorHandler:new i,eventLogger:new o,initializeFn:n,isDev:(u=s.externalApi)==null?void 0:u.isDev(),logId:"default",transportFactories:{console:c,file:a,ipc:r,remote:e},variables:{processType:"main"}});return l.default=l,l.Logger=f,l.processInternalErrorFn=p=>{l.transports.console.writeFn({message:{data:["Unhandled electron-log error",p],level:"error"}})},l}return pe}var he,Ye;function Wt(){if(Ye)return he;Ye=1;const f=A,i=$t(),{initialize:o}=Rt(),c=lt(),a=new i({electron:f}),r=c({dependencies:{externalApi:a},initializeFn:o});he=r,a.onIpc("__ELECTRON_LOG__",(t,s)=>{s.scope&&r.Logger.getInstance(s).scope(s.scope);const n=new Date(s.date);e({...s,date:n.getTime()?n:new Date})}),a.onIpcInvoke("__ELECTRON_LOG__",(t,{cmd:s="",logId:n})=>{switch(s){case"getOptions":return{levels:r.Logger.getInstance({logId:n}).levels,logId:n};default:return e({data:[`Unknown cmd '${s}'`],level:"error"}),{}}});function e(t){var s;(s=r.Logger.getInstance(t))==null||s.processMessage(t)}return he}var de,Qe;function Ut(){if(Qe)return de;Qe=1;const f=ot(),i=lt(),o=new f;return de=i({dependencies:{externalApi:o}}),de}const Bt=typeof process>"u"||process.type==="renderer"||process.type==="worker",Jt=typeof process=="object"&&process.type==="browser";Bt?(st(),N.exports=_t()):Jt?N.exports=Wt():N.exports=Ut();var Ht=N.exports;const S=tt(Ht),x=I.join(_.homedir(),"AppData","Roaming","app_demo","logs");S.transports.file.resolvePathFn=()=>I.join(x,"main.log");S.transports.file.level="info";S.transports.console.level="debug";S.transports.file.format="[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}] {text}";L.existsSync(x)||(L.mkdirSync(x,{recursive:!0}),S.info("Log directory created:",x));At&&(S.info("Application démarrée par Squirrel, fermeture..."),A.app.quit());const Ze=()=>{S.info("Création de la fenêtre principale...");const f=new A.BrowserWindow({width:1200,height:900,webPreferences:{preload:I.join(__dirname,"preload.js")}});{const i=I.join(__dirname,"../renderer/main_window/index.html");S.info("Chargement du fichier de production:",i),f.loadFile(i)}S.info("Ouverture des DevTools..."),f.webContents.openDevTools()};A.app.whenReady().then(()=>{S.info("Application Electron prête, création de la fenêtre..."),Ze(),A.app.on("activate",()=>{S.info("Application activée, vérification des fenêtres..."),A.BrowserWindow.getAllWindows().length===0&&(S.info("Aucune fenêtre trouvée, création d'une nouvelle fenêtre..."),Ze())})});A.app.on("window-all-closed",()=>{S.info("Toutes les fenêtres fermées, plateforme:",process.platform),process.platform!=="darwin"&&(S.info("Fermeture de l'application..."),A.app.quit())});
